MCE_CLIENT_ID=$1
MCE_SERVER_INSTANCE_ID=$2
MCE_MAXLISTCOUNT=$3
MCE_OFFSET=$4
MCE_RETURN_TYPE=$5
MCE_MSG_MASK=$6
MCE_READ_STATUS=$7
MCE_PRIORITY_STATUS=$8
MCE_PERIOD_BEGIN=$9
MCE_PERIOD_END=${10}
MCE_ORIGINATOR=${11}
MCE_RECIPIENT=${12}
MCE_SUBJECT_LENGTH=${13}

MCE_FILTER=""

if [ -z "$MCE_CLIENT_ID" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_SERVER_INSTANCE_ID" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_MAXLISTCOUNT" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_OFFSET" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_RETURN_TYPE" ]
then
   MCE_ERROR=1
fi


if [ "$MCE_ERROR" ]
then
   echo "usage: mce-getmessagelist <CLIENT_ID> <SERVER_INSTANCE_ID> <MAXLISTCOUNT> <OFFSET> <RETURN_TYPE>"
   echo "      [ <FILTER_MSG_MASK> <FILTER_READ_STATUS> <FILTER_PRIORITY_STATUS> "
   echo "        <FILTER_PERIOD_BEGIN> <FILTER_PERIOD_END> "
   echo "        <FILTER_ORIGINATOR> <FILTER_RECIPIENT> <FILTER_SUBJECT_LENGTH> ] "
   echo "
    Where CLIENT_ID is a unique identifier for the client

    Where SERVER_INSTANCE_ID is the MSE server instance

    Where MAXLISTCOUNT is the maximum number of entries to return, or -1 for default

    Where OFFSET start offset, or -1 for default

    Where RETURN_TYPE is the returned message list type, 0 is file, 1 is object

    Where FILTER_MSG_MASK specifies the types of messages to filter out
    ....Set to "-1" to specify no filter
    ... Add "1" to filter out SMS_GSM  messagess
    ....Add "2" to filter out SMS_CDMA messagess
    ....Add "4" to filter out MMS messagess
    ....Add "8" to filter out EMAIL messagess
    ....Example:  "7" (1+2+4) filters out SMS_GSM,SMS_CDMA,MMS messaes
    ....Example:  "8" filters out only EMAIL MESSAGES

    Where FILTER_READ_STATUS specifies to filter out read/unread messages
    ...."-1" to specify no filter
    ...."1"  to filter out unread messages
    ...."2"  to filter out read messages

    Where FILTER_PRIORITY_STATUS specifies to filter out priority/normal messages
    ...."-1" to specify no filter
    ...."1"  to filter out priority messages
    ...."2"  to filter out normal messages

    Where FILTER_PERIOD_BEGIN is  
    ...."NULL" for no filter
    ...."YYYYMMDDTHHMMSS"  date/time format

    Where FILTER_PERIOD_END is  
    ...."NULL" for no filter
    ...."YYYYMMDDTHHMMSS"  date/time format

    Where FILTER_ORIGINATOR is  
    ...."NULL" for no filter
    ....or the address of the originator of the mesage

    Where FILTER_RECIPIENT is  
    ...."NULL" for no filter
    ....or the address of the originator of the mesage

    Where FILTER_SUBJECT_LENGTH is 
    ...."-1" for not set
    ...."0.255" for maximum length of subject
"
   exit 1
fi

if [ -n "$MCE_MSG_MASK" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_MSG_MASK $MCE_MSG_MASK"
fi

if [ -n "$MCE_READ_STATUS" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_READ_STATUS $MCE_READ_STATUS"
fi

if [ -n "$MCE_PRIORITY_STATUS" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_PRIORITY_STATUS $MCE_PRIORITY_STATUS"
fi

if [ -n "$MCE_SUBJECT_LENGTH" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_SUBJECT_LENGTH $MCE_SUBJECT_LENGTH"
fi

if [ -n "$MCE_PERIOD_BEGIN" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_PERIOD_BEGIN $MCE_PERIOD_BEGIN"
fi

if [ -n "$MCE_PERIOD_END" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_PERIOD_END $MCE_PERIOD_END"
fi

if [ -n "$MCE_ORIGINATOR" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_ORIGINATOR $MCE_ORIGINATOR"
fi

if [ -n "$MCE_RECIPIENT" ]
then 
   MCE_FILTER="$MCE_FILTER --es FILTER_RECIPIENT $MCE_RECIPIENT"
fi


MCE_ACTION="GET_MESSAGE_LIST --es CLIENT_ID $MCE_CLIENT_ID --es SERVER_INSTANCE_ID $MCE_SERVER_INSTANCE_ID --es MAXLISTCOUNT $MCE_MAXLISTCOUNT --es OFFSET $MCE_OFFSET --es RETURN_TYPE $MCE_RETURN_TYPE $MCE_FILTER"

source include.sh
