MCE_CLIENT_ID=$1
MCE_SERVER_INSTANCE_ID=$2
MCE_FILEPATH=$3
MCE_CHARSET=$4
MCE_IS_RETRY=$5
MCE_IS_AUTOSEND=$6

if [ -z "$MCE_CLIENT_ID" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_SERVER_INSTANCE_ID" ]
then
   MCE_ERROR=1
fi


if [ -z "$MCE_FILEPATH" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_CHARSET" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_IS_RETRY" ]
then
   MCE_ERROR=1
fi

if [ -z "$MCE_IS_AUTOSEND" ]
then
   MCE_ERROR=1
fi


if [ "$MCE_ERROR" ]
then
   echo "usage: mce-pushmessage <CLIENT_ID> <SERVER_INSTANCE_ID> <FILEPATH> <CHARSET> <IS_RETRY> <IS_AUTOSEND>"
   echo "
    Where CLIENT_ID is a unique identifier for the client
    Where SERVER_INSTANCE_ID is the MSE server instance
    Where FILEPATH is the full path to the BMessage file to push
    Where CHARSET is
        0: NATIVE
        1: UTF-8
    Where IS_RETRY is
        0: FALSE : not retry
        1: TRUE  : is retry
    Where IS_AUTOSEND is
        0: FALSE : don't send message automatically if pushed to outbox
        1: TRUE  : send message automatically if pushed to outbox
"
   exit 1
fi

MCE_ACTION="PUSH_MESSAGE --es CLIENT_ID $MCE_CLIENT_ID --es SERVER_INSTANCE_ID $MCE_SERVER_INSTANCE_ID --es FILEPATH $MCE_FILEPATH --es CHARSET $MCE_CHARSET --es IS_RETRY $MCE_IS_RETRY"

source include.sh